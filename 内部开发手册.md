# git

- git教程请参考[Git教程 - 廖雪峰的官方网站 (liaoxuefeng.com)](https://www.liaoxuefeng.com/wiki/896043488029600)

- dataset/example目录存放一些toy dataset，作为示例demo，可以上传readme对数据集格式示例进行解释说明，**严禁上传大型数据，尤其是包含了二进制文件（图片等）**
- 技巧：多开分支，多commit
  - 每次完成一个小功能后就可以commit，万一有问题还能回退，不要等到所有东西做完了才一次性commit
  - commit信息用英文粗略说明，但不要过于含糊（如就写一个update）
  - 开发新模型
    - 错误做法：直接将新代码上传到master或者使用master进行开发
    - 正确做法：从master分支重新开一个新分支用于开发，完成后再将该分支推送到远程，**在远程合并**到master

- 分支中不要动的文件（以免跟master产生冲突，如果要修改，请在**master**上直接修改，并提前招呼）：

  - readme：新增模型后不需要在readme的表格中说明

  - 所有模块中的init.py文件

- 项目中所有目录下，名字中含有test的文件和文件夹都会被git忽略，可以在里面随便写自己的测试代码，不用担心冲突修改等问题



# code

## 项目结构

- config：暂时闲置
- data：数据模块
  - dataset：存放数据集类，若内置的TextDataset和MultiModalDataset无法满足需要，可以自己新开一个文件写XXDataset类
  - process：存放所有跟数据处理相关的函数/类，注意与**utils**模块区分
- evaluate：评估模块
  - evaluator：评估器类
  - metrics：指标计算函数，用于生成评估器
- model：模型模块
- properties：run模块所需的yaml配置文件示例，用于说明每个`run_from_yaml`的文件示例
- run：每个模型运行的函数
- trainer：
  - BaseTrainer：适用于字典格式的数据
  - GNNTrainer：适用于pyg中`Data`格式的数据
- utils：与数据处理无关的函数/类



## 编码要求

- 所有模型的实现细节，以及lr、batch size等超参数务必与原作者代码**保持一致**，以便能复现出正确结果

- 保持一致**不代表把源代码原封不动抄进来**

  - 原版代码是算法demo，也许写得很乱，并不符合软件工程规范，需要我们整理
  - 我们做的是统一的算法库，所有东西是按工程系统的标准做，有一套统一规范的行为逻辑和API（想想自己平时用过的sklearn、transformers等算法库）；遇事不决，请多参考库中已有的算法示例，如EANN、MDFEND等

- 请保持良好的代码规范和习惯，包括但不限于

  - 命名：变量、函数使用**蛇形**（如：text_features）；类使用**大驼峰**（如：NewModel）；不要使用变量`a`这种命名方式

  - 代码格式化：保证pep8格式（运算符左右两侧空格等），不会的话，在每次commit前，使用vscode/pycharm中的格式化代码功能

  - 注释：函数、类使用**google风格**注释，并在括号中**声明参数类型+函数返回类型**，pycharm中可以自动生成注释并设置注释格式

  - 错误示例

    ```python
    def f(a, b):
        return a+b
    ```

  - 正确示例

    ```python
    def sum(num1: int, num2: int) -> int:
        """
        calculate sum of 2 integers
        
        Args:
        	num1 (int): the first number
        	num2 (int): the second number
    
        Returns:
        	int: sum
        """
    
        return a + b
    ```

- 开发新模型要上传的代码文件包括

  - dataset：如果自己没有新增数据集类而是使用库中已有的，可以不用这项
  - model：新增的模型
  - run：运行模型的函数
  - 其他：根据自己需要，可以在utils或者process中新增函数等，但是请务必提前打招呼，以免跟master产生冲突